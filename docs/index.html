<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Calendar-Vkurko с колонками и масштабом</title>
<style>
  /* Минимальные стили, чтобы сделать две колонки для day/week */
  #calendar {
    max-width: 900px;
    margin: 40px auto;
  }
  .resource-column {
    width: 50%;
    float: left;
    box-sizing: border-box;
    border-right: 1px solid #ccc;
  }
  .resource-column:last-child {
    border-right: none;
  }
  .event {
    background: #3399FF;
    color: white;
    padding: 2px 5px;
    margin: 2px 0;
    border-radius: 3px;
  }
</style>
</head>
<body>

<div>
  <button id="view-day">День</button>
  <button id="view-week">Неделя</button>
  <button id="view-month">Месяц</button>
</div>

<div id="calendar"></div>

<script>
  // Изначальные данные событий для двух мастеров
  const events = [
    { id: 1, master: 'Natalia', start: new Date(2025,6,10,10,0), end: new Date(2025,6,10,11,0), title: 'Процедура у Натальи' },
    { id: 2, master: 'Irina', start: new Date(2025,6,10,12,0), end: new Date(2025,6,10,13,30), title: 'Звонок Ирине' },
    { id: 3, master: 'Natalia', start: new Date(2025,6,11,9,0), end: new Date(2025,6,11,10,30), title: 'Процедура у Натальи' },
    { id: 4, master: 'Irina', start: new Date(2025,6,12,15,0), end: new Date(2025,6,12,16,0), title: 'Консультация Ирины' },
  ];

  let currentView = 'month';
  let zoomLevel = 1; // масштаб месяца

  const calendarDiv = document.getElementById('calendar');

  function clearCalendar() {
    calendarDiv.innerHTML = '';
  }

  // Функция отрисовки месяца с масштабированием
  function renderMonth() {
    clearCalendar();
    const daysInMonth = new Date(2025, 7, 0).getDate();
    const table = document.createElement('table');
    table.style.width = '100%';
    table.style.borderCollapse = 'collapse';

    // Заголовок с числами
    let headerRow = document.createElement('tr');
    for(let d=1; d<=daysInMonth; d++){
      const th = document.createElement('th');
      th.style.border = '1px solid #ccc';
      th.style.padding = '5px';
      th.textContent = d;
      headerRow.appendChild(th);
    }
    table.appendChild(headerRow);

    // Одна строка с событиями (просто для примера)
    let eventsRow = document.createElement('tr');
    for(let d=1; d<=daysInMonth; d++){
      const td = document.createElement('td');
      td.style.border = '1px solid #ccc';
      td.style.height = `${30 * zoomLevel}px`;  // Масштабируем высоту
      td.style.verticalAlign = 'top';
      // Вставляем события на этот день
      const dayEvents = events.filter(ev => ev.start.getDate() === d);
      dayEvents.forEach(ev => {
        const div = document.createElement('div');
        div.className = 'event';
        div.textContent = ev.title + ' (' + ev.master + ')';
        td.appendChild(div);
      });
      eventsRow.appendChild(td);
    }
    table.appendChild(eventsRow);
    calendarDiv.appendChild(table);
  }

  // Функция отрисовки дня с двумя колонками (мастерами)
  function renderDay() {
    clearCalendar();
    const container = document.createElement('div');

    ['Natalia', 'Irina'].forEach(master => {
      const col = document.createElement('div');
      col.className = 'resource-column';

      const title = document.createElement('h3');
      title.textContent = master;
      col.appendChild(title);

      // Фильтруем события по мастеру и дате (пример — сегодня)
      const dayEvents = events.filter(ev =>
        ev.master === master &&
        ev.start.toDateString() === new Date(2025,6,10).toDateString()
      );

      dayEvents.forEach(ev => {
        const div = document.createElement('div');
        div.className = 'event';
        div.textContent = `${ev.title} ${formatTime(ev.start)}-${formatTime(ev.end)}`;
        col.appendChild(div);
      });

      container.appendChild(col);
    });

    calendarDiv.appendChild(container);
  }

  // Функция отрисовки недели с двумя колонками
  function renderWeek() {
    clearCalendar();
    const container = document.createElement('div');
    const startDate = new Date(2025,6,7); // Пн недели
    const days = 7;

    ['Natalia', 'Irina'].forEach(master => {
      const col = document.createElement('div');
      col.className = 'resource-column';

      const title = document.createElement('h3');
      title.textContent = master;
      col.appendChild(title);

      for(let i=0; i<days; i++){
        const day = new Date(startDate.getTime());
        day.setDate(day.getDate() + i);

        const dayEvents = events.filter(ev =>
          ev.master === master &&
          ev.start.toDateString() === day.toDateString()
        );

        const dayDiv = document.createElement('div');
        dayDiv.style.borderTop = '1px solid #eee';
        dayDiv.style.padding = '5px 0';
        dayDiv.textContent = day.toDateString();

        dayEvents.forEach(ev => {
          const div = document.createElement('div');
          div.className = 'event';
          div.textContent = `${ev.title} ${formatTime(ev.start)}-${formatTime(ev.end)}`;
          dayDiv.appendChild(div);
        });

        col.appendChild(dayDiv);
      }

      container.appendChild(col);
    });

    calendarDiv.appendChild(container);
  }

  // Вспомогательная функция для форматирования времени
  function formatTime(date){
    return date.getHours().toString().padStart(2,'0') + ':' + date.getMinutes().toString().padStart(2,'0');
  }

  // Навигация по видам
  document.getElementById('view-day').onclick = () => { currentView='day'; renderDay(); };
  document.getElementById('view-week').onclick = () => { currentView='week'; renderWeek(); };
  document.getElementById('view-month').onclick = () => { currentView='month'; renderMonth(); };

  // Изначально показываем месяц
  renderMonth();

  // Обработчик зума колесом мыши в режиме месяца
  calendarDiv.addEventListener('wheel', e => {
    if(currentView === 'month' && (e.ctrlKey || e.metaKey)){
      e.preventDefault();
      if(e.deltaY < 0){
        zoomLevel = Math.min(5, zoomLevel + 0.1);
      } else {
        zoomLevel = Math.max(0.5, zoomLevel - 0.1);
      }
      renderMonth();
    }
  }, { passive: false });

</script>

</body>
</html>
