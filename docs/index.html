<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <title>–ö–∞–ª–µ–Ω–¥–∞—Ä—å —Å –¥–≤—É–º—è –∫–æ–ª–æ–Ω–∫–∞–º–∏ –∏ –Ω–æ—á–Ω—ã–º —Ä–µ–∂–∏–º–æ–º</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  
  <link href="https://cdn.jsdelivr.net/npm/fullcalendar@4.4.2/core/main.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/fullcalendar@4.4.2/daygrid/main.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/@fullcalendar/resource-timegrid@4.4.2/main.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/fullcalendar@4.4.2/timegrid/main.min.css" rel="stylesheet" />

  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@4.4.2/core/main.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@4.4.2/interaction/main.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@4.4.2/daygrid/main.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@4.4.2/timegrid/main.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fullcalendar/resource-common@4.4.2/main.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fullcalendar/resource-timegrid@4.4.2/main.min.js"></script>

  <style>
    body {
      margin: 0; padding: 0;
      font-family: "Lucida Grande", Helvetica, Arial, Verdana, sans-serif;
      font-size: 14px;
      background: #fff;
      transition: background-color 0.3s, color 0.3s;
    }
    #calendar {
      max-width: 900px;
      margin: 40px auto;
    }
    .fc-toolbar-chunk {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    /* –ù–æ—á–Ω–æ–π —Ä–µ–∂–∏–º */
    body.night-mode {
      background: #121212;
      color: #eee;
    }
    body.night-mode .fc {
      background: #121212;
      color: #eee;
    }
    body.night-mode .fc-toolbar-title,
    body.night-mode .fc-button {
      color: #eee;
      background: #222;
      border-color: #444;
    }
    body.night-mode .fc-button:hover {
      background: #555;
    }
    #toggleNightMode {
      cursor: pointer;
      padding: 4px 10px;
      background: #007bff;
      border: none;
      border-radius: 5px;
      color: white;
      font-weight: 600;
    }
  </style>
</head>
<body>

  <button id="toggleNightMode" title="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –Ω–æ—á–Ω–æ–π —Ä–µ–∂–∏–º">üåô –ù–æ—á–Ω–æ–π —Ä–µ–∂–∏–º</button>
  <div id="calendar"></div>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      let isNight = false;

      const calendarEl = document.getElementById('calendar');

      const calendar = new FullCalendar.Calendar(calendarEl, {
        plugins: [ 'interaction', 'dayGrid', 'timeGrid', 'resourceTimeGrid' ],
        schedulerLicenseKey: 'CC-Attribution-NonCommercial-NoDerivatives',
        defaultView: 'resourceTimeGridDay',
        header: {
          left: 'prev,next today',
          center: 'title',
          right: 'resourceTimeGridDay,resourceTimeGridWeek,dayGridMonth'
        },
        resources: [
          { id: 'natalia', title: '–ù–∞—Ç–∞–ª—å—è' },
          { id: 'irina', title: '–ò—Ä–∏–Ω–∞' }
        ],
        events: [
          { id: '1', resourceId: 'natalia', start: '2025-07-10T09:00:00', end: '2025-07-10T11:00:00', title: '–ü—Ä–æ—Ü–µ–¥—É—Ä–∞ —É –ù–∞—Ç–∞–ª—å–∏' },
          { id: '2', resourceId: 'irina', start: '2025-07-10T12:00:00', end: '2025-07-10T13:30:00', title: '–ó–≤–æ–Ω–æ–∫ –ò—Ä–∏–Ω–µ' }
        ],
        editable: true,
        selectable: true,
        nowIndicator: true,
        // –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –≤ –º–µ—Å—è—á–Ω–æ–º –≤–∏–¥–µ
        eventLimit: true,
        views: {
          dayGridMonth: {
            eventLimit: 3,
            eventLimitClick: 'popover'
          }
        }
      });

      calendar.render();

      // –ö–Ω–æ–ø–∫–∞ –Ω–æ—á–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞
      const btnNight = document.getElementById('toggleNightMode');
      btnNight.addEventListener('click', () => {
        isNight = !isNight;
        document.body.classList.toggle('night-mode', isNight);
        btnNight.textContent = isNight ? '‚òÄÔ∏è –°–≤–µ—Ç–ª—ã–π —Ä–µ–∂–∏–º' : 'üåô –ù–æ—á–Ω–æ–π —Ä–µ–∂–∏–º';
      });

      // –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –≤ –º–µ—Å—è—á–Ω–æ–º –≤–∏–¥–µ –∫–æ–ª–µ—Å–æ–º –º—ã—à–∏
      calendarEl.addEventListener('wheel', (e) => {
        if (calendar.view.type !== 'dayGridMonth') return; // —Ç–æ–ª—å–∫–æ –≤ –º–µ—Å—è—Ü–µ
        if (e.ctrlKey || e.metaKey) {
          e.preventDefault();

          let curEventLimit = calendar.getOption('eventLimit') || 3;
          if (e.deltaY < 0) {
            // zoom in - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –±–æ–ª—å—à–µ —Å–æ–±—ã—Ç–∏–π
            curEventLimit = Math.min(10, curEventLimit + 1);
          } else {
            // zoom out - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –º–µ–Ω—å—à–µ —Å–æ–±—ã—Ç–∏–π
            curEventLimit = Math.max(1, curEventLimit - 1);
          }
          calendar.setOption('eventLimit', curEventLimit);
        }
      });
    });
  </script>

</body>
</html>
